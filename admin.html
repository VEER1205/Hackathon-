<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Database Panel</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a2a6c, #2b5876);
      color: #fff;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .admin-container {
      width: 100%;
      max-width: 1200px;
      background: rgba(13, 17, 43, 0.9);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(0, 132, 255, 0.5);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 162, 255, 0.3);
    }

    .admin-header {
      background: linear-gradient(90deg, #0d2b5a 0%, #143887 100%);
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(0, 162, 255, 0.3);
    }

    .admin-logo {
      display: flex;
      align-items: center;
    }

    .admin-logo i {
      font-size: 28px;
      color: #00c6ff;
      margin-right: 15px;
    }

    .admin-logo h1 {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(90deg, #6eb6ff 0%, #4d8aff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .admin-actions {
      display: flex;
      gap: 15px;
    }

    .admin-btn {
      background: linear-gradient(135deg, #0084ff 0%, #004ce6 100%);
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .admin-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 20px rgba(0, 191, 255, 0.7);
    }

    .admin-content {
      display: flex;
      min-height: 600px;
    }

    .admin-sidebar {
      width: 250px;
      background: rgba(13, 22, 58, 0.8);
      padding: 20px;
      border-right: 1px solid rgba(0, 162, 255, 0.3);
    }

    .admin-sidebar h3 {
      color: #6eb6ff;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(0, 162, 255, 0.3);
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 15px;
    }

    .sidebar-menu a {
      color: #a0b9ff;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .sidebar-menu a:hover, .sidebar-menu a.active {
      background: rgba(0, 123, 255, 0.2);
      color: #00c6ff;
    }

    .admin-main {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .card {
      background: rgba(13, 22, 58, 0.6);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(0, 162, 255, 0.2);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .card-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, #0084ff 0%, #004ce6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .card h2 {
      font-size: 32px;
      color: #00c6ff;
    }

    .card p {
      color: #a0b9ff;
      font-size: 14px;
    }

    .data-table {
      width: 100%;
      background: rgba(13, 22, 58, 0.6);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(0, 162, 255, 0.2);
    }

    .table-header {
      background: rgba(0, 123, 255, 0.2);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .table-header h3 {
      color: #6eb6ff;
    }

    .search-box {
      display: flex;
      align-items: center;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 8px 15px;
      border: 1px solid rgba(0, 162, 255, 0.3);
    }

    .search-box input {
      background: transparent;
      border: none;
      color: #fff;
      outline: none;
      margin-left: 10px;
      width: 200px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 15px 20px;
      text-align: left;
      border-bottom: 1px solid rgba(0, 162, 255, 0.2);
    }

    th {
      color: #6eb6ff;
      font-weight: 600;
      background: rgba(0, 0, 0, 0.2);
    }

    td {
      color: #a0b9ff;
    }

    tr:hover {
      background: rgba(0, 123, 255, 0.1);
    }

    .action-btn {
      background: transparent;
      border: none;
      color: #00c6ff;
      cursor: pointer;
      margin-right: 10px;
      font-size: 16px;
    }

    .action-btn:hover {
      color: #4d8aff;
    }

    .login-container {
      width: 100%;
      max-width: 450px;
      background: rgba(13, 17, 43, 0.9);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(0, 132, 255, 0.5);
      padding: 40px;
      text-align: center;
    }

    .login-container h2 {
      margin-bottom: 30px;
      color: #6eb6ff;
    }

    .input-group {
      margin-bottom: 20px;
      text-align: left;
    }

    .input-group label {
      display: block;
      margin-bottom: 8px;
      color: #a0b9ff;
    }

    .input-group input {
      width: 100%;
      padding: 14px;
      border-radius: 8px;
      border: 2px solid rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.3);
      color: white;
      transition: all 0.3s ease;
    }

    .input-group input:focus {
      outline: none;
      border-color: #00c6ff;
      box-shadow: 0 0 15px rgba(0, 198, 255, 0.5);
    }

    .login-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #0084ff 0%, #004ce6 100%);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      box-shadow: 0 0 15px rgba(0, 123, 255, 0.5);
      transition: all 0.3s ease;
    }

    .login-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 20px rgba(0, 191, 255, 0.7);
    }

    .admin-login {
      display: none;
    }

    /* Database Management Styles */
    .db-management {
      margin-top: 30px;
    }

    .db-actions {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    .db-form {
      background: rgba(13, 22, 58, 0.6);
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      border: 1px solid rgba(0, 162, 255, 0.2);
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #a0b9ff;
    }

    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid rgba(255,255,255,0.1);
      background: rgba(0,0,0,0.3);
      color: white;
    }

    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: #00c6ff;
    }

    .form-row {
      display: flex;
      gap: 15px;
    }

    .form-row .form-group {
      flex: 1;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: rgba(13, 17, 43, 0.95);
      border-radius: 15px;
      padding: 30px;
      width: 500px;
      max-width: 90%;
      box-shadow: 0 0 30px rgba(0, 132, 255, 0.5);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h2 {
      color: #6eb6ff;
    }

    .close-modal {
      background: transparent;
      border: none;
      color: #a0b9ff;
      font-size: 24px;
      cursor: pointer;
    }

    /* User Management Section */
    #userManagementSection {
      display: none;
    }

    @media (max-width: 900px) {
      .admin-content {
        flex-direction: column;
      }
      
      .admin-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(0, 162, 255, 0.3);
      }
      
      .dashboard-cards {
        grid-template-columns: 1fr;
      }

      .form-row {
        flex-direction: column;
        gap: 0;
      }
    }
  </style>
</head>
<body>
  <div class="admin-login" id="loginPage">
    <div class="login-container">
      <h2><i class="fas fa-lock"></i> Admin Authentication</h2>
      <div class="input-group">
        <label for="username">Username</label>
        <input type="text" id="username" placeholder="Enter admin username">
      </div>
      <div class="input-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter admin password">
      </div>
      <button class="login-btn" onclick="login()">Login to Dashboard</button>
    </div>
  </div>

  <div class="admin-container" id="adminPanel" style="display: none;">
    <div class="admin-header">
      <div class="admin-logo">
        <i class="fas fa-database"></i>
        <h1>Admin Database Panel</h1>
      </div>
      <div class="admin-actions">
        <button class="admin-btn" onclick="showAddUserModal()"><i class="fas fa-plus"></i> Add User</button>
        <button class="admin-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </div>
    </div>
    
    <div class="admin-content">
      <div class="admin-sidebar">
        <h3>Navigation</h3>
        <ul class="sidebar-menu">
          <li><a href="#" class="active" onclick="showSection('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
          <li><a href="#" onclick="showSection('userManagement')"><i class="fas fa-users"></i> User Management</a></li>
          <li><a href="#" onclick="showSection('databaseManagement')"><i class="fas fa-table"></i> Database Management</a></li>
          <li><a href="#"><i class="fas fa-chart-bar"></i> Analytics</a></li>
          <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
        </ul>
      </div>
      
      <div class="admin-main">
        <!-- Dashboard Section -->
        <div id="dashboardSection">
          <div class="dashboard-cards">
            <div class="card">
              <div class="card-header">
                <div class="card-icon">
                  <i class="fas fa-users"></i>
                </div>
              </div>
              <h2 id="totalUsers">0</h2>
              <p>Total Users</p>
            </div>
            
            <div class="card">
              <div class="card-header">
                <div class="card-icon">
                  <i class="fas fa-user-check"></i>
                </div>
              </div>
              <h2 id="activeUsers">0</h2>
              <p>Active Users</p>
            </div>
            
            <div class="card">
              <div class="card-header">
                <div class="card-icon">
                  <i class="fas fa-clock"></i>
                </div>
              </div>
              <h2 id="pendingUsers">0</h2>
              <p>Pending Users</p>
            </div>
            
            <div class="card">
              <div class="card-header">
                <div class="card-icon">
                  <i class="fas fa-ban"></i>
                </div>
              </div>
              <h2 id="suspendedUsers">0</h2>
              <p>Suspended Users</p>
            </div>
          </div>
          
          <div class="data-table">
            <div class="table-header">
              <h3><i class="fas fa-list"></i> User Records</h3>
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search users..." onkeyup="searchUsers(this.value)">
              </div>
            </div>
            
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Profile</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Status</th>
                  <th>Join Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="userTableBody">
                <!-- User data will be populated here -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- User Management Section -->
        <div id="userManagementSection">
          <h2><i class="fas fa-users"></i> User Management</h2>
          <p class="description">View and manage all user accounts in the system.</p>
          
          <div class="data-table">
            <div class="table-header">
              <h3><i class="fas fa-list"></i> All Users</h3>
              <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search users..." onkeyup="searchUsers(this.value)">
              </div>
            </div>
            
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Profile</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Status</th>
                  <th>Join Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="userManagementTableBody">
                <!-- User data will be populated here -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Database Management Section -->
        <div id="databaseManagementSection" style="display: none;">
          <h2><i class="fas fa-database"></i> Database Management</h2>
          <p class="description">Manage your database tables, run queries, and perform maintenance tasks.</p>
          
          <div class="db-actions">
            <button class="admin-btn" onclick="exportData()"><i class="fas fa-download"></i> Export Data</button>
            <button class="admin-btn" onclick="importData()"><i class="fas fa-upload"></i> Import Data</button>
            <button class="admin-btn" onclick="clearAllData()" style="background: linear-gradient(135deg, #ff4757 0%, #ff0000 100%);"><i class="fas fa-trash"></i> Clear All Data</button>
          </div>
          
          <div class="db-form">
            <h3><i class="fas fa-database"></i> Database Information</h3>
            <div class="form-group">
              <label>Total Users: <span id="dbTotalUsers">0</span></label>
              <label>Database Size: <span id="dbSize">0 KB</span></label>
              <label>Last Backup: <span id="lastBackup">Never</span></label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add User Modal -->
  <div class="modal" id="addUserModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-user-plus"></i> Add New User</h2>
        <button class="close-modal" onclick="closeModal('addUserModal')">&times;</button>
      </div>
      <div class="form-group">
        <label for="newUserName">Full Name</label>
        <input type="text" id="newUserName" placeholder="Enter full name">
      </div>
      <div class="form-group">
        <label for="newUserEmail">Email Address</label>
        <input type="email" id="newUserEmail" placeholder="Enter email address">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="newUserStatus">Status</label>
          <select id="newUserStatus">
            <option value="Active">Active</option>
            <option value="Pending">Pending</option>
            <option value="Suspended">Suspended</option>
          </select>
        </div>
        <div class="form-group">
          <label for="newUserPhone">Phone (Optional)</label>
          <input type="tel" id="newUserPhone" placeholder="Enter phone number">
        </div>
      </div>
      <button class="admin-btn" style="width: 100%; margin-top: 20px;" onclick="addNewUser()">Add User</button>
    </div>
  </div>

  <!-- Edit User Modal -->
  <div class="modal" id="editUserModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-user-edit"></i> Edit User</h2>
        <button class="close-modal" onclick="closeModal('editUserModal')">&times;</button>
      </div>
      <input type="hidden" id="editUserId">
      <div class="form-group">
        <label for="editUserName">Full Name</label>
        <input type="text" id="editUserName" placeholder="Enter full name">
      </div>
      <div class="form-group">
        <label for="editUserEmail">Email Address</label>
        <input type="email" id="editUserEmail" placeholder="Enter email address">
      </div>
      <div class="form-group">
        <label for="editUserPhone">Phone</label>
        <input type="tel" id="editUserPhone" placeholder="Enter phone number">
      </div>
      <div class="form-group">
        <label for="editUserStatus">Status</label>
        <select id="editUserStatus">
          <option value="Active">Active</option>
          <option value="Pending">Pending</option>
          <option value="Suspended">Suspended</option>
        </select>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="editUserLinkedIn">LinkedIn</label>
          <input type="url" id="editUserLinkedIn" placeholder="LinkedIn profile URL">
        </div>
        <div class="form-group">
          <label for="editUserGithub">GitHub</label>
          <input type="url" id="editUserGithub" placeholder="GitHub profile URL">
        </div>
      </div>
      <button class="admin-btn" style="width: 100%; margin-top: 20px;" onclick="updateUser()">Update User</button>
    </div>
  </div>

  <script>
    // Simple authentication
    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      // Simple check (in real application, use secure authentication)
      if (username === 'admin' && password === 'admin123') {
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
        loadUserData();
      } else {
        alert('Invalid credentials. Please try again.');
      }
    }
    
    function logout() {
      document.getElementById('loginPage').style.display = 'flex';
      document.getElementById('adminPanel').style.display = 'none';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }
    
    // Show login page by default
    document.getElementById('loginPage').style.display = 'flex';

    // Section navigation
    function showSection(sectionName) {
      document.getElementById('dashboardSection').style.display = 'none';
      document.getElementById('userManagementSection').style.display = 'none';
      document.getElementById('databaseManagementSection').style.display = 'none';
      
      document.getElementById(sectionName + 'Section').style.display = 'block';
      
      // Update active menu item
      const menuItems = document.querySelectorAll('.sidebar-menu a');
      menuItems.forEach(item => item.classList.remove('active'));
      event.currentTarget.classList.add('active');
      
      // If showing user management, refresh data
      if (sectionName === 'userManagement' || sectionName === 'dashboard') {
        loadUserData();
      } else if (sectionName === 'databaseManagement') {
        updateDatabaseInfo();
      }
    }

    // Modal functions
    function showAddUserModal() {
      document.getElementById('addUserModal').style.display = 'flex';
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // User management functions
    function searchUsers(query) {
      const rows = document.querySelectorAll('#userTableBody tr, #userManagementTableBody tr');
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        if (text.includes(query.toLowerCase())) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }

    function editUser(userId) {
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      const user = adminData.find(u => u.id === userId);
      
      if (user) {
        document.getElementById('editUserId').value = user.id;
        document.getElementById('editUserName').value = user.name || '';
        document.getElementById('editUserEmail').value = user.email || '';
        document.getElementById('editUserPhone').value = user.phone || '';
        document.getElementById('editUserStatus').value = user.status || 'Active';
        document.getElementById('editUserLinkedIn').value = user.linkedin || '';
        document.getElementById('editUserGithub').value = user.github || '';
        
        document.getElementById('editUserModal').style.display = 'flex';
      }
    }

    function updateUser() {
      const userId = document.getElementById('editUserId').value;
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      const userIndex = adminData.findIndex(u => u.id === userId);
      
      if (userIndex !== -1) {
        adminData[userIndex].name = document.getElementById('editUserName').value;
        adminData[userIndex].email = document.getElementById('editUserEmail').value;
        adminData[userIndex].phone = document.getElementById('editUserPhone').value;
        adminData[userIndex].status = document.getElementById('editUserStatus').value;
        adminData[userIndex].linkedin = document.getElementById('editUserLinkedIn').value;
        adminData[userIndex].github = document.getElementById('editUserGithub').value;
        
        localStorage.setItem('adminUserData', JSON.stringify(adminData));
        closeModal('editUserModal');
        loadUserData();
        alert('User updated successfully!');
      }
    }

    function deleteUser(userId) {
      if (confirm('Are you sure you want to delete this user?')) {
        const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
        const updatedData = adminData.filter(user => user.id !== userId);
        localStorage.setItem('adminUserData', JSON.stringify(updatedData));
        loadUserData();
        alert('User deleted successfully!');
      }
    }

    function addNewUser() {
      const name = document.getElementById('newUserName').value;
      const email = document.getElementById('newUserEmail').value;
      const status = document.getElementById('newUserStatus').value;
      const phone = document.getElementById('newUserPhone').value;
      
      if (!name || !email) {
        alert('Please fill in all required fields.');
        return;
      }
      
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      const newId = '#' + (adminData.length + 1).toString().padStart(3, '0');
      
      const newUser = {
        id: newId,
        name: name,
        email: email,
        status: status,
        phone: phone,
        registrationDate: new Date().toISOString().split('T')[0]
      };
      
      adminData.push(newUser);
      localStorage.setItem('adminUserData', JSON.stringify(adminData));
      
      closeModal('addUserModal');
      loadUserData();
      
      // Clear form
      document.getElementById('newUserName').value = '';
      document.getElementById('newUserEmail').value = '';
      document.getElementById('newUserPhone').value = '';
      
      alert('User added successfully!');
    }

    function loadUserData() {
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      const userTableBody = document.getElementById('userTableBody');
      const userManagementTableBody = document.getElementById('userManagementTableBody');
      
      // Clear existing rows
      userTableBody.innerHTML = '';
      userManagementTableBody.innerHTML = '';
      
      // Update counters
      document.getElementById('totalUsers').textContent = adminData.length;
      document.getElementById('activeUsers').textContent = adminData.filter(user => user.status === 'Active').length;
      document.getElementById('pendingUsers').textContent = adminData.filter(user => user.status === 'Pending').length;
      document.getElementById('suspendedUsers').textContent = adminData.filter(user => user.status === 'Suspended').length;
      
      // Populate tables
      adminData.forEach(user => {
        const row = document.createElement('tr');
        
        // Determine status color
        let statusColor = '#4CAF50'; // Active - green
        if (user.status === 'Pending') statusColor = '#FF9800'; // Pending - orange
        if (user.status === 'Suspended') statusColor = '#F44336'; // Suspended - red
        
        row.innerHTML = `
          <td>${user.id}</td>
          <td><div style="width: 40px; height: 40px; border-radius: 50%; background: #0072ff; display: flex; align-items: center; justify-content: center; color: white;">${user.name ? user.name.charAt(0).toUpperCase() : 'U'}</div></td>
          <td>${user.name || 'N/A'}</td>
          <td>${user.email || 'N/A'}</td>
          <td>${user.phone || 'N/A'}</td>
          <td><span style="color: ${statusColor};">${user.status || 'Active'}</span></td>
          <td>${user.registrationDate ? user.registrationDate.split('T')[0] : 'N/A'}</td>
          <td>
            <button class="action-btn" onclick="editUser('${user.id}')"><i class="fas fa-edit"></i></button>
            <button class="action-btn" onclick="deleteUser('${user.id}')"><i class="fas fa-trash"></i></button>
          </td>
        `;
        
        userTableBody.appendChild(row.cloneNode(true));
        userManagementTableBody.appendChild(row);
      });
      
      // If no users, show message
      if (adminData.length === 0) {
        const noDataRow = document.createElement('tr');
        noDataRow.innerHTML = `<td colspan="8" style="text-align: center; padding: 20px;">No user data found. <a href="dashboard.html" style="color: #00c6ff;">Go to Dashboard</a> to create a profile.</td>`;
        userTableBody.appendChild(noDataRow.cloneNode(true));
        userManagementTableBody.appendChild(noDataRow);
      }
    }

    function updateDatabaseInfo() {
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      document.getElementById('dbTotalUsers').textContent = adminData.length;
      
      // Calculate approximate database size
      const dataStr = JSON.stringify(adminData);
      const sizeInKB = (new Blob([dataStr]).size / 1024).toFixed(2);
      document.getElementById('dbSize').textContent = sizeInKB + ' KB';
      
      // Check if we have a backup timestamp
      const lastBackup = localStorage.getItem('lastBackup');
      document.getElementById('lastBackup').textContent = lastBackup || 'Never';
    }

    function exportData() {
      const adminData = JSON.parse(localStorage.getItem('adminUserData') || '[]');
      const dataStr = JSON.stringify(adminData, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      
      const exportFileDefaultName = 'user-data.json';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
      
      // Update last backup time
      const now = new Date();
      const backupTime = now.toLocaleString();
      localStorage.setItem('lastBackup', backupTime);
      document.getElementById('lastBackup').textContent = backupTime;
      
      alert('Data exported successfully!');
    }

    function importData() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      
      input.onchange = e => {
        const file = e.target.files[0];
        const reader = new FileReader();
        
        reader.onload = function(e) {
          try {
            const importedData = JSON.parse(e.target.result);
            
            if (Array.isArray(importedData)) {
              localStorage.setItem('adminUserData', JSON.stringify(importedData));
              loadUserData();
              updateDatabaseInfo();
              alert('Data imported successfully!');
            } else {
              alert('Invalid file format. Please select a valid JSON file.');
            }
          } catch (error) {
            alert('Error parsing JSON file: ' + error.message);
          }
        };
        
        reader.readAsText(file);
      };
      
      input.click();
    }

    function clearAllData() {
      if (confirm('Are you sure you want to clear ALL user data? This action cannot be undone.')) {
        localStorage.removeItem('adminUserData');
        localStorage.setItem('adminUserData', JSON.stringify([]));
        loadUserData();
        updateDatabaseInfo();
        alert('All user data has been cleared.');
      }
    }

    // Close modal if clicked outside
    window.onclick = function(event) {
      const modals = document.getElementsByClassName('modal');
      for (let i = 0; i < modals.length; i++) {
        if (event.target == modals[i]) {
          modals[i].style.display = 'none';
        }
      }
    }
  </script>
</body>
</html>